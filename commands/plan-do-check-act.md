---
description: Iterative PDCA cycle for systematic experimentation and continuous improvement
argument-hint: 改善目標または対処する問題（オプション）
---

# Plan-Do-Check-Act（PDCA）

反復的な問題解決とプロセス最適化による継続的改善のためにPDCAサイクルを適用。

## 説明

4フェーズの反復サイクル: Plan（特定と分析）、Do（変更を実装）、Check（結果を測定）、Act（標準化または調整）。体系的な実験と改善を可能にする。

## 使用方法

`/plan-do-check-act [改善目標]`

## 変数

- GOAL: 改善目標または対処する問題（デフォルト: 入力を促す）
- CYCLE_NUMBER: PDCAの何回目か（デフォルト: 1）

## 手順

### フェーズ1: PLAN

1. 問題または改善目標を定義
2. 現状を分析（ベースラインメトリクス）
3. 根本原因を特定（`/why`または`/cause-and-effect`を使用）
4. 仮説を立てる: 「Xを変更すれば、Yが改善する」
5. 実験を設計: 何を変更するか、成功をどう測定するか
6. 成功基準を設定（測定可能な目標）

### フェーズ2: DO

1. 計画した変更を実装（最初は小規模で）
2. 実際に行ったことを記録
3. 計画からの逸脱を記録
4. 実装中にデータを収集
5. 予期しない観察を記録

### フェーズ3: CHECK

1. 成功基準に対して結果を測定
2. ベースラインと比較（変更前 vs 変更後）
3. データを分析: 仮説は正しかったか？
4. 何がうまくいき、何がうまくいかなかったかを特定
5. 学びと洞察を記録

### フェーズ4: ACT

1. **成功した場合**: 変更を標準化
   - ドキュメントを更新
   - チームをトレーニング
   - チェックリスト/自動化を作成
   - リグレッションを監視
2. **失敗した場合**: 学んで調整
   - なぜ失敗したかを理解
   - 仮説を改良
   - 調整した計画で新しいPDCAサイクルを開始
3. **部分的に成功した場合**:
   - うまくいった部分を標準化
   - 残りの問題に対して次のサイクルを計画

## 例

### 例1: ビルド時間の削減

```
サイクル1
───────
PLAN:
  問題: Dockerビルドに45分かかる
  現状: 毎回フルリビルド、レイヤーキャッシュなし
  根本原因: ビルド間でパッケージマネージャーキャッシュが保持されない
  仮説: 依存関係をキャッシュすれば、ビルドを10分未満に短縮できる
  変更: package.json + node_modulesのレイヤーキャッシュを追加
  成功基準: 依存関係が変更されていない場合、ビルド時間10分未満

DO:
  - Dockerfileを再構成: srcファイルの前にpackage*.jsonをCOPY
  - node_modules用の.dockerignoreを追加
  - Dockerレイヤー用のCIキャッシュを設定
  - 3回のビルドでテスト

CHECK:
  結果:
    - 依存関係変更なし: 8分 ✓（45分から）
    - 依存関係変更あり: 12分（45分から）
    - フレッシュビルド: 45分（同じ、想定通り）
  分析: キャッシュありビルドで82%削減、仮説確認

ACT:
  標準化:
    ✓ Dockerfileの変更をマージ
    ✓ CIパイプライン設定を更新
    ✓ READMEにドキュメント化
    ✓ ビルド時間監視を追加

  新しい問題: 依存関係変更時の12分はまだ遅い
  → サイクル2を開始


サイクル2
───────
PLAN:
  問題: 依存関係変更時のビルドがまだ12分
  現状: npm installがすべてのパッケージを再ビルド
  根本原因: 一部のパッケージがソースからコンパイル
  仮説: プリビルドバイナリを使用すれば5分未満に短縮できる
  変更: npm installの代わりにnpm ciを使用、バイナリミラーを設定
  成功基準: 依存関係変更時のビルド5分未満

DO:
  - npm ciに変更（package-lock.jsonを使用）
  - バイナリミラー設定の.npmrcを追加
  - 5回の依存関係更新でテスト

CHECK:
  結果:
    - 依存関係変更: 4.5分 ✓（12分から）
    - コンパイルエラーが0に削減（3件から）
  分析: npm ciがより高速で信頼性が高い、仮説確認

ACT:
  標準化:
    ✓ npm ciをすべての場所で使用（ローカル + CI）
    ✓ .npmrcをコミット
    ✓ 開発者オンボーディングドキュメントを更新

  総改善: 45分 → 4.5分（90%削減）
  ✓ PDCA完了、2週間監視
```

### 例2: 本番バグの削減

```
サイクル1
───────
PLAN:
  問題: 月8件の本番バグ
  現状: 手動テストのみ、自動テストなし
  根本原因: リリース前にリグレッションが検出されない
  仮説: 統合テストを追加すればバグを50%削減できる
  変更: クリティカルパス用の統合テストスイートを実装
  成功基準: 1ヶ月後に月4件未満のバグ

DO:
  第1-2週: 統合テストを作成:
    - ユーザー認証フロー
    - 決済処理
    - データエクスポート
  第3週: CIでテストを実行するよう設定
  第4週: テスト作成のチームトレーニング
  カバレッジ: 3つのクリティカルパス（0から）

CHECK:
  1ヶ月後の結果:
    - 本番バグ: 6件（8件から）
    - CIで検出されたバグ: 4件
    - テスト失敗（偽陽性）: 2件
  分析: 25%削減、50%目標には達せず
  洞察: バグはまだテストがない領域で発生

ACT:
  部分的に成功:
    ✓ 既存のテストを維持（4件のバグを防止）
    ✓ フレーキーテストを修正

  サイクル2に向けて調整:
    - テストカバレッジをすべてのユーザーフローに拡大
    - バグが発生しやすい領域にテストを追加
    → サイクル2を開始


サイクル2
───────
PLAN:
  問題: まだ月6件のバグ、4件未満が必要
  現状: 3つのクリティカルパスがテスト済み、全12パス
  根本原因: UIインタラクションバグが統合テストでカバーされていない
  仮説: すべてのユーザーフローのE2Eテストで4件未満を達成できる
  変更: 残り9フローのE2Eテストを追加
  成功基準: 月4件未満のバグ、80%カバレッジ

DO:
  第1-3週: すべてのユーザーフローのE2Eテストを追加
  第4週: ビジュアルリグレッションテストを設定
  カバレッジ: 12/12ユーザーフロー（3/12から）

CHECK:
  1ヶ月後の結果:
    - 本番バグ: 3件 ✓（6件から）
    - CIで検出されたバグ: 8件（4件から）
    - テスト保守時間: 週3時間
  分析: 目標達成！ベースラインから62%削減

ACT:
  標準化:
    ✓ すべてのPRでテストを必須に
    ✓ PRテンプレートにテストチェックリストを追加
    ✓ 週次テストレビューをスケジュール
    ✓ テスト保守のランブックを作成

  監視: バグ率とテスト有効性を毎月追跡
  ✓ PDCA完了
```

### 例3: コードレビュー速度の改善

```
PLAN:
  問題: PRのマージに平均3日かかる
  現状: 手動レビュー、自動化なし
  根本原因: レビュアーがCIが通るのを見てからレビューを開始
  仮説: 自動レビュー + 高速CIで1日未満に短縮できる
  変更: 自動チェックを追加 + 長いCIジョブを分割
  成功基準: 平均マージ時間1日（8時間）未満

DO:
  - 自動リンターチェックを設定（早期失敗）
  - テストスイートを並列ジョブに分割
  - セルフレビューチェックリスト付きPRテンプレートを追加
  - CI時間: 45分 → 15分
  - 2週間PRマージ時間を追跡

CHECK:
  結果:
    - 平均マージ時間: 1.5日（3日から）
    - CI待ち時間: 15分（45分から）
    - レビュー待ち時間: 1.3日（2日以上から）
  分析: CIは高速化したが、レビューがまだボトルネック

ACT:
  部分的に成功:
    ✓ 高速CI改善を維持

  洞察: 真のボトルネックはCIではなくレビュアーの可用性
  新しいPDCAに向けて調整:
    - レビュアーの可用性/通知に焦点
    - ローテーションレビュー割り当てを検討
  → 異なる仮説で新しいPDCAサイクルを開始
```

## 注意事項

- 小さく測定可能な変更から始める（大規模な改修ではなく）
- PDCAは反復的—複数サイクルは普通
- 失敗した実験は学習の機会
- すべてを記録: サイクル間でパターンを見やすくなる
- 成功基準は測定可能でなければならない（主観的ではなく）
- フェーズ4「Act」が次のサイクルまたは完了を決定
- 3サイクル後に行き詰まったら、根本原因分析を再検討
- PDCAは技術的改善とプロセス改善の両方に有効
- 包括的なドキュメント化には `/analyse-problem`（A3）を使用
