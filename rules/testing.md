---
globs: ["**/*.test.ts", "**/*.test.tsx", "**/*.spec.ts", "**/*.spec.tsx", "**/tests/**", "**/__tests__/**"]
---

# Testing Rules

テストファイル編集時に適用されるルール。

## テスト構成

- `describe`でテスト対象をグループ化
- `it`/`test`の説明は「〜すべき」形式
- Arrange-Act-Assert (AAA) パターンを使用
- 1テスト1アサーションを心がける

## テストの独立性

- テスト間で状態を共有しない
- 各テストは独立して実行可能に
- `beforeEach`/`afterEach`で適切にクリーンアップ
- 外部依存はモック化

## カバレッジ

- ビジネスロジックは重点的にテスト
- エッジケース（境界値、null、空配列等）をカバー
- エラーケースもテスト
- ハッピーパスだけでなく異常系も

## 禁止事項

- `skip`や`only`をコミットに含めない
- 時間依存のテスト（flaky testの原因）
- 過度なモック化（実装詳細への依存）
